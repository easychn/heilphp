
<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta charset="utf-8">
		
		<title>新增SEO设置|HeilPHP内容管理框架</title>
	  <script type="text/javascript" src="/static/js/jquery-2.1.4.min.js"></script>
	</head>
	<body class="hold-transition sidebar-mini">
							<input type="text" class="text input-large" name="title" value="">
							
<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=rkG5tCxVrbXh9qRp92ZI4Yny1zUX8WC4"></script>
<style>
.layer-container{
	position:relative;
	width:100%;height:100%;
}
	.layer-container .top-bar{
		position:relative;
		z-index:1;opacity:0.8;
		min-height:80px;
		background:#000000;
	}
	.layer-container .top-bar .tips{
		background:#ffffff;
		color:#000000;
		font-size:14px;
		line-height:30px;
		padding:0 15px;
	}
	.layer-container .top-bar .tips b{
		color:#ff0000;
	}
	.layer-container .top-bar .form{
		padding:0 15px;
		display:flex;
		display:-webkit-flex;
		flex-direction:row;
		justify-content:space-between;
		flex-wrap: wrap;
	}
	.layer-container .top-bar .form .item{
		height:32px;;
		margin-top:9px;
		display:flex;
		display:-webkit-flex;
		flex-direction:row;
		justify-content:flex-start;
		flex-wrap: wrap;
	}
	.layer-container .top-bar .form .item:last-child{
		justify-content:flex-end;
	}
	.layer-container .top-bar .form .item input{
		float:left;
		display:block;
		height:32px;width:200px;
	}
	.layer-container .top-bar .form .item a{
		display:block;
		float:left;
		width:80px;height:32px;
		margin-left:10px ;
		border-radius:3px;
		text-align:center;line-height:32px;
		background:#4cdb00;
		color:#ffffff;
	}
	.layer-container .map-container{
		position:absolute;	
		top:0;left:0;;
		width:100%;height:100%;
	}
</style>
<input type="text" class="text input-large" name="test" value=""  id="test>" />
<a class="coordinate_test" href="javascript:;" title="点击获取目标位置坐标"><i class="fa fa-map">点击</i></a>

<div class="mapBuilderHtml_test" style="display:none;">
	<div>
		<div class="layer-container">
			<div class="top-bar">
				<div class="tips">
					<b class="text-danger">双击地图</b>待坐标选定后，点击<b class="text-danger">确定</b>可以<b class="text-danger">完成</b>地理位置坐标拾取。
				</div>
				<div class="form">
					<div class="item">
						<input type="text" name="search_test" placeholder="请输入地址" />
						<a href="javascript:;" class="search_test">
							搜索地址
						</a>   
					</div>
					<div class="item">
						<input class="show_test" type="text" />
						<a href="javascript:;" class="submit_test">
							提交
						</a>   
					</div>
				</div>
			</div>
			<div class="map-container">
			</div>
		</div>
	</div>
</div>
<script>
	var mapContainer_test = '<div id="map_test" style="width:100%;height:100%;">' +
	'地图加载中，若加载失败请检查配置文件中BAIDU_MAP_KEY是否正确配置'+
	'</div>';
var map_test;var local_test;
function mapBuilder_test(){
	// 百度地图API功能
	map_test = new BMap.Map("map_test");            
	map_test.centerAndZoom("三亚",12);           
	map_test.enableScrollWheelZoom();   //启用滚轮放大缩小，默认禁用
	map_test.enableContinuousZoom();    //启用地图惯性拖拽，默认禁用
	local_test = new BMap.LocalSearch(
		map_test		,{renderOptions:{map_test: map_test}}
	);
	//搜索
	$(document).on('click','.layer-container a.search_test',function(){
		local_test.search($(this).parent().find('input').val());
		console.log($(this).parent().find('input').val());
		console.log(local_test);
	})


	//单击获取点击的经纬度
	map_test.addEventListener("click",function(e){
			map_test.clearOverlays();
			var point = new BMap.Point(e.point.lng, e.point.lat);
			var marker = new BMap.Marker(point);  // 创建标注
			map_test.addOverlay(marker);               // 将标注添加到地图中
			//marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳
		$('.show_test').val(e.point.lng + "," + e.point.lat);
	});
	/**
	 * 确认
	 */
	$(document).on('click','.layer-container a.submit_test',function(){
		console.log('test');
		coordinate = $(this).parent().find('input').val();
		if(!coordinate){
			layer.msg('请在目标地图位置点击鼠标');
		}
		else{
			layer.msg('拾取成功,请稍等',function(){
				$("input[name='test']").val(coordinate);
				layer.closeAll();
			});
		}
	})


}
</script>
<script>
	$(function(){
		layui.define(['layer'], function(){
		})
		$(".coordinate_test").on("click",function(){
			$html = $($('.mapBuilderHtml_test').html());
			$html.find('.layer-container .map-container').append(mapContainer_test);
			layui.use(['layer'], function(){
				var layer = layui.layer;
				//弹窗
				layer.open({
					type: 1,
					title:'获取地理位置坐标',
					content: $html.html(),
					area: ['88%', '88%'],
					offset:'auto',
					success:function(){
						mapBuilder_test();
					}
				});       
			});  
		})
	})
</script>


<script src="/static/layui/layui.js"></script>

		
<script src="/theme/default/view/admin/static/js/common.js?v=1536752645.9507"></script>
	</body>
</html>

